/*! Copyright 2016 Ayogo Health Inc. */
import { MenuButtonBehaviour } from './button';
const MENU_STYLES = `
menu[type="context"],
menu[data-owner="button"] {
    display: none;
    padding: 0;
    margin: 0;
    border: 1px solid;
    will-change: transform;
    transform: scaleY(0);
    transform-origin: top center;
    transition: transform 225ms cubic-bezier(0.4, 0.0, 0.2, 1);
}

menuitem {
    display: list-item;
    list-style-type: none;
    background: Menu;
    font: menu;
    padding: 0.25em 0.5em;
    cursor: default;
}

menuitem::after {
    content: attr(label);
}

menuitem[disabled] {
    color: GrayText;
}

menuitem:not([disabled]):hover,
menuitem:not([disabled]):focus {
    background: Highlight;
    color: HighlightText;
}

button[type="menu"]::after,
button[data-type="menu"]:after { content: ' ▾'; }

button[type="menu"]:empty::after,
button[data-type="menu"]:empty:after { content: '▾'; } /* No space character */
`;
const PREFIX_STYLES = `
menu[type="context"],
menu[data-owner="button"] {
    -webkit-transform: scaleY(0);
    -webkit-transform-origin: top center;
    -webkit-transition: -webkit-transform 225ms cubic-bezier(0.4, 0.0, 0.2, 1);
    transition: -webkit-transform 225ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
`;
let mnuStyle = document.createElement('style');
mnuStyle.appendChild(document.createTextNode(MENU_STYLES));
if (!('transform' in document.createElement('div').style)) {
    mnuStyle.appendChild(document.createTextNode(PREFIX_STYLES));
}
let insertPoint;
if (insertPoint = document.querySelector('link')) {
    insertPoint.parentNode.insertBefore(mnuStyle, insertPoint);
}
else if (insertPoint = document.querySelector('style')) {
    insertPoint.parentNode.insertBefore(mnuStyle, insertPoint);
}
else if (insertPoint = document.querySelector('head')) {
    insertPoint.appendChild(mnuStyle);
}
else {
    document.appendChild(mnuStyle);
}
let gcCache = null;
if ('WeakMap' in window) {
    gcCache = new WeakMap();
}
export default function MenuButton(el) {
    let behaviour = new MenuButtonBehaviour(el);
    if (gcCache) {
        gcCache.set(el, behaviour);
    }
    return behaviour;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdUNBQXVDO0FBR3ZDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUUvQyxNQUFNLFdBQVcsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0F5Q25CLENBQUM7QUFHRixNQUFNLGFBQWEsR0FBRzs7Ozs7Ozs7Q0FRckIsQ0FBQTtBQUtELElBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDL0MsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFHM0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztBQUNqRSxDQUFDO0FBR0QsSUFBSSxXQUFnQyxDQUFDO0FBQ3JDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvQyxXQUFXLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDL0QsQ0FBQztBQUFDLElBQUksQ0FDTixFQUFFLENBQUMsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEQsV0FBVyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFBQyxJQUFJLENBQ04sRUFBRSxDQUFDLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLFdBQVcsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdEMsQ0FBQztBQUFDLElBQUksQ0FBQyxDQUFDO0lBQ0osUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNuQyxDQUFDO0FBR0QsSUFBSSxPQUFPLEdBQTRELElBQUksQ0FBQztBQUM1RSxFQUFFLENBQUMsQ0FBQyxTQUFTLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN0QixPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztBQUM1QixDQUFDO0FBR0QsTUFBTSxDQUFDLE9BQU8scUJBQXFCLEVBQXNCO0lBQ3JELElBQUksU0FBUyxHQUFHLElBQUksbUJBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFNUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ3JCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQ29weXJpZ2h0IDIwMTYgQXlvZ28gSGVhbHRoIEluYy4gKi9cclxuXHJcblxyXG5pbXBvcnQgeyBNZW51QnV0dG9uQmVoYXZpb3VyIH0gZnJvbSAnLi9idXR0b24nO1xyXG5cclxuY29uc3QgTUVOVV9TVFlMRVMgPSBgXHJcbm1lbnVbdHlwZT1cImNvbnRleHRcIl0sXHJcbm1lbnVbZGF0YS1vd25lcj1cImJ1dHRvblwiXSB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkO1xyXG4gICAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTtcclxuICAgIHRyYW5zZm9ybTogc2NhbGVZKDApO1xyXG4gICAgdHJhbnNmb3JtLW9yaWdpbjogdG9wIGNlbnRlcjtcclxuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyMjVtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSk7XHJcbn1cclxuXHJcbm1lbnVpdGVtIHtcclxuICAgIGRpc3BsYXk6IGxpc3QtaXRlbTtcclxuICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IE1lbnU7XHJcbiAgICBmb250OiBtZW51O1xyXG4gICAgcGFkZGluZzogMC4yNWVtIDAuNWVtO1xyXG4gICAgY3Vyc29yOiBkZWZhdWx0O1xyXG59XHJcblxyXG5tZW51aXRlbTo6YWZ0ZXIge1xyXG4gICAgY29udGVudDogYXR0cihsYWJlbCk7XHJcbn1cclxuXHJcbm1lbnVpdGVtW2Rpc2FibGVkXSB7XHJcbiAgICBjb2xvcjogR3JheVRleHQ7XHJcbn1cclxuXHJcbm1lbnVpdGVtOm5vdChbZGlzYWJsZWRdKTpob3ZlcixcclxubWVudWl0ZW06bm90KFtkaXNhYmxlZF0pOmZvY3VzIHtcclxuICAgIGJhY2tncm91bmQ6IEhpZ2hsaWdodDtcclxuICAgIGNvbG9yOiBIaWdobGlnaHRUZXh0O1xyXG59XHJcblxyXG5idXR0b25bdHlwZT1cIm1lbnVcIl06OmFmdGVyLFxyXG5idXR0b25bZGF0YS10eXBlPVwibWVudVwiXTphZnRlciB7IGNvbnRlbnQ6ICcg4pa+JzsgfVxyXG5cclxuYnV0dG9uW3R5cGU9XCJtZW51XCJdOmVtcHR5OjphZnRlcixcclxuYnV0dG9uW2RhdGEtdHlwZT1cIm1lbnVcIl06ZW1wdHk6YWZ0ZXIgeyBjb250ZW50OiAn4pa+JzsgfSAvKiBObyBzcGFjZSBjaGFyYWN0ZXIgKi9cclxuYDtcclxuXHJcblxyXG5jb25zdCBQUkVGSVhfU1RZTEVTID0gYFxyXG5tZW51W3R5cGU9XCJjb250ZXh0XCJdLFxyXG5tZW51W2RhdGEtb3duZXI9XCJidXR0b25cIl0ge1xyXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWSgwKTtcclxuICAgIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogdG9wIGNlbnRlcjtcclxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMjI1bXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xyXG4gICAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMjI1bXMgY3ViaWMtYmV6aWVyKDAuNCwgMC4wLCAwLjIsIDEpO1xyXG59XHJcbmBcclxuXHJcblxyXG4vLyBJbmplY3QgZGVmYXVsdCBzdHlsaW5nXHJcblxyXG5sZXQgbW51U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG5tbnVTdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShNRU5VX1NUWUxFUykpO1xyXG5cclxuLy8gQWRkIG9sZCBwcmVmaXhlZCBzdHlsZXMgZm9yIG9sZGVyIGlPUyBhbmQgQW5kcm9pZCBkZXZpY2VzXHJcbmlmICghKCd0cmFuc2Zvcm0nIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlKSkge1xyXG4gICAgbW51U3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoUFJFRklYX1NUWUxFUykpO1xyXG59XHJcblxyXG5cclxubGV0IGluc2VydFBvaW50IDogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5pZiAoaW5zZXJ0UG9pbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaW5rJykpIHtcclxuICAgIGluc2VydFBvaW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG1udVN0eWxlLCBpbnNlcnRQb2ludCk7XHJcbn0gZWxzZVxyXG5pZiAoaW5zZXJ0UG9pbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdHlsZScpKSB7XHJcbiAgICBpbnNlcnRQb2ludC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShtbnVTdHlsZSwgaW5zZXJ0UG9pbnQpO1xyXG59IGVsc2VcclxuaWYgKGluc2VydFBvaW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpKSB7XHJcbiAgICBpbnNlcnRQb2ludC5hcHBlbmRDaGlsZChtbnVTdHlsZSk7XHJcbn0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5hcHBlbmRDaGlsZChtbnVTdHlsZSk7XHJcbn1cclxuXHJcblxyXG5sZXQgZ2NDYWNoZSA6IFdlYWtNYXA8SFRNTEJ1dHRvbkVsZW1lbnQsIE1lbnVCdXR0b25CZWhhdmlvdXI+IHwgbnVsbCA9IG51bGw7XHJcbmlmICgnV2Vha01hcCcgaW4gd2luZG93KSB7XHJcbiAgICBnY0NhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lbnVCdXR0b24oZWwgOiBIVE1MQnV0dG9uRWxlbWVudCkge1xyXG4gICAgbGV0IGJlaGF2aW91ciA9IG5ldyBNZW51QnV0dG9uQmVoYXZpb3VyKGVsKTtcclxuXHJcbiAgICBpZiAoZ2NDYWNoZSkge1xyXG4gICAgICAgIGdjQ2FjaGUuc2V0KGVsLCBiZWhhdmlvdXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBiZWhhdmlvdXI7XHJcbn1cclxuIl19